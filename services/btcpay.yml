  btcpay:
    container_name: btcpay
    image: btcpayserver/btcpayserver:1.13.0
    user: "${UID}:${GID}"
    depends_on: [nbx, postgres]
    entrypoint: ["dotnet", "BTCPayServer.dll"]
    volumes:
      - ./data/btcpay:/data
      - ./data/nbx:/data/.nbxplorer:ro
      - ./data/lnd:/data/.lnd:ro
    expose:
      - "49392"
    environment:
      HOME: "/data"
      BTCPAY_DATADIR: "/data"
      BTCPAY_PLUGINDIR: "/data/plugins"
      BTCPAY_DOCKERDEPLOYMENT: "false"
      BTCPAY_POSTGRES: "User ID=postgres;Host=postgres;Port=5432;Database=btcpayservermainnet"
      BTCPAY_NETWORK: "mainnet"
      BTCPAY_BIND: 0.0.0.0:3003
      BTCPAY_CHAINS: "btc"
      BTCPAY_BTCEXPLORERURL: "http://nbx:32838"
      BTCPAY_BTCLIGHTNING: "type=lnd-rest;server=https://lnd:8080/;macaroonfilepath=/data/.lnd/data/chain/bitcoin/mainnet/admin.macaroon;allowinsecure=true"
      BTCPAY_SOCKSENDPOINT: tor:9050
      BTCPAY_EXPLORERPOSTGRES: User ID=postgres;Host=postgres;Port=5432;Application Name=nbxplorer;MaxPoolSize=20;Database=nbxplorermainnet
    restart: unless-stopped
